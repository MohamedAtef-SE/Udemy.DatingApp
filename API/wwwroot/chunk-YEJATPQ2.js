import{a as $}from"./chunk-T5J757QH.js";import{a as L}from"./chunk-I3TZEFVU.js";import{a as I,b as F}from"./chunk-UKS4EY6V.js";import{a as R,b as V}from"./chunk-N64AD6VI.js";import"./chunk-L3R4MWKK.js";import{Da as h,Fa as v,Ga as w,Ha as s,Ia as i,Ja as g,N as k,Na as C,P as M,Pa as d,Qa as l,Ub as U,W as x,X as _,_a as o,ab as u,gb as S,ja as b,kb as E,la as m,lb as T,sb as P,xa as y,za as p}from"./chunk-R4PBEABJ.js";import"./chunk-5WK33CEB.js";var f=class extends L{constructor(){super(...arguments),this.container="Inbox"}};var N=(t,c)=>c.id;function z(t,c){if(t&1){let e=C();s(0,"div",5)(1,"ng-lottie",6),d("animationCreated",function(n){x(e);let a=l();return _(a.animationCreated(n))}),i()()}if(t&2){let e=l();m(),p("options",e.options)}}function O(t,c){if(t&1&&(g(0,"img",18),s(1,"span",19),o(2),i()),t&2){let e=l().$implicit;p("src",e.recipientPhotoURL||"./assets/images/default.webp",b)("alt",e.recipientUserName+"Profile picture"),m(2),u(" ",e.recipientUserName,"")}}function D(t,c){if(t&1&&(g(0,"img",18),s(1,"span",19),o(2),i()),t&2){let e=l().$implicit;p("src",e.senderPhotoURL||"./assets/images/default.webp",b)("alt",e.senderUserName+"Profile picture"),m(2),u(" ",e.senderUserName,"")}}function j(t,c){if(t&1){let e=C();s(0,"tr",11)(1,"td",12),o(2),i(),s(3,"td",13),y(4,O,3,3)(5,D,3,3),i(),s(6,"td",14),g(7,"i",15),o(8),E(9,"timeago"),i(),s(10,"td",16),d("click",function(n){return x(e),_(n.stopPropagation())}),s(11,"button",17),d("click",function(){let n=x(e).$implicit,a=l(2);return _(a.deleteMessage(n.id))}),o(12," Delete "),i()()()}if(t&2){let e=c.$implicit,r=l(2);p("routerLink",r.getRoute(e)),m(2),u(" ",e.content," "),m(2),h(4,r.messageParams.container==="Outbox"?4:5),m(4),u(" ",T(9,4,e.messageSent)," ")}}function B(t,c){if(t&1&&(s(0,"div",7)(1,"table",8)(2,"thead",9)(3,"tr")(4,"th",10),o(5," Message "),i(),s(6,"th",10),o(7," From/To "),i(),s(8,"th",10),o(9," Sent/Receivied "),i(),g(10,"th",10),i()(),s(11,"tbody"),v(12,j,13,6,"tr",11,N),i()()()),t&2){let e=l();m(12),w(e.Messages())}}var ie=(()=>{class t{constructor(){this._MessageService=k($),this.messageParams=new f,this.Messages=P(()=>this._MessageService.paginatedResult()?.items),this.options={path:"/assets/svg/desert.json"}}ngOnInit(){this.loadMessages()}loadMessages(){this._MessageService.getMessage(this.messageParams)}getRoute(e){return this.messageParams.container=="Outbox"?`/members/${e.recipientUserName}/messages`:`/members/${e.senderUserName}/messages`}deleteMessage(e){this._MessageService.deleteMessage(e).subscribe({next:r=>this._MessageService.paginatedResult.update(n=>(n&&n.items&&n.items.splice(n.items.findIndex(a=>a.id==e),1),n))})}setContainer(e){this.messageParams.container=e,this.loadMessages()}animationCreated(e){console.log(e)}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=M({type:t,selectors:[["app-messages"]],standalone:!0,features:[S],decls:10,vars:1,consts:[[1,"container","p-10"],["role","group",1,"inline-flex","rounded-md","shadow-xs"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-sky-600","bg-transparent","border","border-sky-700","rounded-s-lg","hover:bg-sky-600","hover:text-white","focus:z-10","focus:ring-0","focus:bg-sky-600","focus:text-white",3,"click"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-sky-600","bg-transparent","border","border-sky-700","hover:bg-sky-600","hover:text-white","focus:z-10","focus:ring-0","focus:bg-sky-600","focus:text-white",3,"click"],["type","button",1,"px-4","py-2","text-sm","font-medium","text-sky-600","bg-transparent","border","border-sky-700","rounded-e-lg","hover:bg-sky-600","hover:text-white","focus:z-10","focus:ring-0","focus:bg-sky-600","focus:text-white",3,"click"],[1,"w-1/2","mx-auto","mt-10"],[3,"animationCreated","options"],[1,"relative","overflow-x-auto","border","border-sky-100","mt-5","sm:rounded-lg"],[1,"w-full","text-sm","text-left","rtl:text-right","text-gray-500","dark:text-gray-400"],[1,"text-xs","text-sky-600","uppercase","bg-sky-50","dark:bg-gray-700","dark:text-gray-400"],["scope","col",1,"px-6","py-3"],[1,"bg-white","cursor-pointer","border-b","dark:bg-gray-800","dark:border-gray-700","border-gray-200","hover:bg-gray-50","dark:hover:bg-gray-600",3,"routerLink"],["scope","row",1,"px-6","py-4","font-medium","text-gray-900","whitespace-nowrap","dark:text-white"],[1,"px-6","py-4","flex","items-center"],[1,"px-6","py-4"],[1,"fa-regular","text-gray-600","fa-clock"],[1,"px-6","py-4",3,"click"],[1,"rounded","py-2","px-4","text-white","text-sm","font-semibold","bg-sky-500","hover:bg-sky-700",3,"click"],[1,"w-10","h-10","mx-1","rounded-full",3,"src","alt"],[1,"font-semibold","text-sm"]],template:function(r,n){if(r&1&&(s(0,"section",0)(1,"div",1)(2,"button",2),d("click",function(){return n.setContainer("Unread")}),o(3," Unread "),i(),s(4,"button",3),d("click",function(){return n.setContainer("Inbox")}),o(5," Inbox "),i(),s(6,"button",4),d("click",function(){return n.setContainer("Outbox")}),o(7," Outbox "),i()(),y(8,z,2,1,"div",5)(9,B,14,0),i()),r&2){let a;m(8),h(8,((a=n.Messages())==null?null:a.length)==0?8:9)}},dependencies:[V,R,U,F,I]})}}return t})();export{ie as MessagesComponent};
